<!-- 
MyAuth updateLog
By Daen
QQ1330166565
 -->
<script src='http://mycdn.daenx.cn/updateLog/js/layui.js' charset='utf-8'></script>
<!DOCTYPE html><html><head><meta charset="utf-8">
<script>
//æœåŠ¡å™¨åœ°å€
var server_url = "http://myauthtest.daenx.cn/myauth/";
//é”™è¯¯è·³è½¬åœ°å€
var error_url = "http://mycdn.daenx.cn/error.html";
function timestampToTime(timestamp) {
	var date = new Date(timestamp * 1000);
	var Y = date.getFullYear() + '-';
	var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1):date.getMonth()+1) + '-';
	var D = (date.getDate()< 10 ? '0'+date.getDate():date.getDate())+ ' ';
	var h = (date.getHours() < 10 ? '0'+date.getHours():date.getHours())+ ':';
	var m = (date.getMinutes() < 10 ? '0'+date.getMinutes():date.getMinutes()) + ':';
	var s = date.getSeconds() < 10 ? '0'+date.getSeconds():date.getSeconds();
	return Y+M+D+h+m+s;
}
function myReplace(sInput, sChar, sReplaceChar) {
	if(sInput==""||sInput==undefined) {
        return "";
    }
	var oReg =new RegExp(sChar,"g");
	return sInput.replace(oReg, sReplaceChar);
}
function getQueryVariable(variable){
	var query = window.location.search.substring(1);
	var vars = query.split("&");
	for (var i=0;i<vars.length;i++) {
		var pair = vars[i].split("=");
		if(pair[0] == variable){return pair[1];}
	}
	return("");
}
function replaceFlag(updLogC){
	var updLog = myReplace(updLogC,'ã€æ–°å¢ã€‘','<span class="layui-badge layui-bg-green">æ–°å¢</span> &nbsp;&nbsp;');
	updLog = myReplace(updLog,'ã€ä¿®å¤ã€‘','<span class="layui-badge layui-bg-orange">ä¿®å¤</span> &nbsp;&nbsp;');
	updLog = myReplace(updLog,'ã€ä¼˜åŒ–ã€‘','<span class="layui-badge layui-bg-blue">ä¼˜åŒ–</span> &nbsp;&nbsp;');
	updLog = myReplace(updLog,'ã€å…¶ä»–ã€‘','<span class="layui-badge layui-bg-black">å…¶ä»–</span> &nbsp;&nbsp;');
	updLog = myReplace(updLog,'ã€åˆ é™¤ã€‘','<span class="layui-badge layui-bg-red">åˆ é™¤</span> &nbsp;&nbsp;');
	return updLog;
}
function replaceHr(updLogC){
	var updLog = myReplace(myReplace(updLogC,'\r\n','<br>'),'\n','<br>');
	return updLog;
}
var skey= getQueryVariable("skey");
if(skey == ''){
	window.location.replace(error_url);
}
var httpRequest = new XMLHttpRequest();
httpRequest.open('GET', server_url + 'web/getUpdateLog?skey=' + skey, true);
httpRequest.send();
httpRequest.onreadystatechange = function () {
	if (httpRequest.readyState == 4 && httpRequest.status == 200) {
		var ret = httpRequest.responseText;
		var json = JSON.parse(ret);
		var result = json.result;
		var softName = result.softName;
		var updlogList = result.updlogList;
		var html = '<title>' + softName + ' - æ›´æ–°æ—¥å¿—</title><meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><link rel="stylesheet" href="http://mycdn.daenx.cn/updateLog/css/layui.css" media="all"><link rel="shortcut icon" type="image/x-icon" href="http://mycdn.daenx.cn/updateLog/favicon.ico" /></head><body style="padding:20px;max-width:700px;margin:0 auto;"><fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">  <legend>à¹‘ä¹›â—¡ä¹›à¹‘å¡åœ¨äº†å¥‡æ€ªçš„åœ°æ–¹</legend></fieldset>      <center><a href="#"><button type="button" class="layui-btn layui-btn-normal layui-btn-radius">' + softName +'</button></a><br></center><fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;"><legend>æ›´æ–°æ—¥å¿—</legend></fieldset><ul class="layui-timeline">  ';
		var log = '';
		for (element of updlogList){
		  log = log + '<li class="layui-timeline-item"><i class="layui-icon layui-timeline-axis">ğŸ˜ƒ</i><div class="layui-timeline-content layui-text"><h3 class="layui-timeline-title">Ver:' + element.ver + '&nbsp;&nbsp;' +timestampToTime( element.upd_time) + '</h3>' + replaceHr(replaceFlag(element.upd_log)) + 'element';
		}
		html = html + log;
		html = html + '</ul>       ';
		html = html + "</body></html>";
		document.write(html);
	}
};
</script>

